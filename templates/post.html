{{ define "content" }}
<div class="post-card mb-4">
    <h2 class="card-title">{{ .Post.Title }}</h2>
    <div class="categories mb-2">
        {{ range .Post.Categories }}
            <a class="badge bg-secondary category-badge text-decoration-none" href="/filter/category?id={{ .ID }}">{{ .Name }}</a>
        {{ end }}
    </div>
    <div class="text-muted mb-3">–ê–≤—Ç–æ—Ä: {{ .Post.Author }} | {{ .Post.CreatedAt }}</div>
    <div class="mb-3">{{ .Post.Content }}</div>
    <div>
        {{ if .User }}
            <form method="POST" action="/like" class="d-inline">
                <input type="hidden" name="type" value="post">
                <input type="hidden" name="id" value="{{ .Post.ID }}">
                <input type="hidden" name="action" value="like">
                <button class="btn btn-outline-primary btn-sm" type="submit">üëç {{ .Post.Likes }}</button>
            </form>
            <form method="POST" action="/like" class="d-inline">
                <input type="hidden" name="type" value="post">
                <input type="hidden" name="id" value="{{ .Post.ID }}">
                <input type="hidden" name="action" value="dislike">
                <button class="btn btn-outline-danger btn-sm" type="submit">üëé {{ .Post.Dislikes }}</button>
            </form>
        {{ else }}
            <button class="btn btn-outline-primary btn-sm show-login-popup">üëç {{ .Post.Likes }}</button>
            <button class="btn btn-outline-danger btn-sm show-login-popup">üëé {{ .Post.Dislikes }}</button>
        {{ end }}
    </div>
</div>

<h3 class="mt-4">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
{{ if .Comments }}
    {{ range .Comments }}
    <div class="comment py-2 border-bottom">
        <div><b>{{ .Author }}</b> | {{ .CreatedAt }}</div>
        <div>{{ .Content }}</div>
        <div class="mt-1">
            {{ if $.User }}
                <form method="POST" action="/like" class="d-inline">
                    <input type="hidden" name="type" value="comment">
                    <input type="hidden" name="id" value="{{ .ID }}">
                    <input type="hidden" name="action" value="like">
                    <button class="btn btn-outline-primary btn-sm" type="submit">üëç {{ .Likes }}</button>
                </form>
                <form method="POST" action="/like" class="d-inline">
                    <input type="hidden" name="type" value="comment">
                    <input type="hidden" name="id" value="{{ .ID }}">
                    <input type="hidden" name="action" value="dislike">
                    <button class="btn btn-outline-danger btn-sm" type="submit">üëé {{ .Dislikes }}</button>
                </form>
            {{ else }}
                <button class="btn btn-outline-primary btn-sm show-login-popup">üëç {{ .Likes }}</button>
                <button class="btn btn-outline-danger btn-sm show-login-popup">üëé {{ .Dislikes }}</button>
            {{ end }}
        </div>
    </div>
    {{ end }}
{{ else }}
    <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
{{ end }}

{{ if .User }}
<form method="POST" action="/post/comment" class="mt-3">
    <input type="hidden" name="post_id" value="{{ .Post.ID }}">
    <textarea class="form-control mb-2" name="content" rows="3" required></textarea>
    <button class="btn btn-secondary" type="submit">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
</form>
{{ else }}
<p><a href="/login">–í–æ–π–¥–∏—Ç–µ</a>, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.</p>
{{ end }}
{{ end }}
